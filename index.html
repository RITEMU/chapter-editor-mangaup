<!DOCTYPE html><html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>پردازشگر تصویر</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<style>
:root {
--primary: #4a90e2;
--secondary: #f5f5f5;
--border: #ddd;
--text: #333;
}

* {
box-sizing: border-box;
margin: 0;
padding: 0;
font-family: Tahoma, Arial, sans-serif;
}

body {
background-color: #f0f2f5;
color: var(--text);
line-height: 1.6;
padding: 20px;
}

.container {
max-width: 1200px;
margin: 0 auto;
background: white;
padding: 2rem;
border-radius: 12px;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.header {
text-align: center;
margin-bottom: 2rem;
}

.header h1 {
color: var(--primary);
font-size: 2rem;
margin-bottom: 1rem;
}

.input-group {
margin-bottom: 1.5rem;
padding: 1rem;
border: 1px solid var(--border);
border-radius: 8px;
background: var(--secondary);
}

.input-group label {
display: block;
margin-bottom: 0.5rem;
font-weight: bold;
}

.input-group input[type="number"],
.input-group input[type="range"],
.input-group select {
width: 100%;
padding: 0.5rem;
border: 1px solid var(--border);
border-radius: 4px;
font-size: 1rem;
}

.checkbox-group {
display: flex;
align-items: center;
gap: 0.5rem;
margin: 1rem 0;
}

.file-drop-zone {
border: 2px dashed var(--primary);
padding: 2rem;
text-align: center;
border-radius: 8px;
background: #f8f9fa;
cursor: pointer;
transition: all 0.3s ease;
}

.file-drop-zone:hover {
background: #e9ecef;
}

.file-list {
margin: 1rem 0;
max-height: 300px;
overflow-y: auto;
padding: 1rem;
border: 1px solid var(--border);
border-radius: 4px;
}

.file-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 0.5rem;
border-bottom: 1px solid var(--border);
}

.button-group {
display: flex;
gap: 1rem;
margin-top: 2rem;
}

.btn {
padding: 0.75rem 1.5rem;
border: none;
border-radius: 4px;
cursor: pointer;
font-size: 1rem;
transition: all 0.3s ease;
}

.btn-primary {
background: var(--primary);
color: white;
}

.btn-primary:hover {
background: #357abd;
}

.btn-secondary {
background: var(--secondary);
color: var(--text);
border: 1px solid var(--border);
}

.btn-secondary:hover {
background: #e6e6e6;
}

.progress-bar {
width: 100%;
height: 20px;
background: var(--secondary);
border-radius: 10px;
margin: 1rem 0;
overflow: hidden;
display: none;
}

.progress-bar-fill {
height: 100%;
background: var(--primary);
width: 0%;
transition: width 0.3s ease;
}

@media (max-width: 768px) {
.container {
padding: 1rem;
}

.button-group {
flex-direction: column;
}

.btn {
width: 100%;
}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>پردازشگر تصویر</h1>
</div>

<div class="input-group">
<div class="file-drop-zone" id="dropZone">
<p>فایل‌های خود را اینجا رها کنید یا کلیک کنید</p>
<input type="file" id="fileInput" multiple webkitdirectory directory style="display: none">
</div>
<div class="file-list" id="fileList"></div>
</div>

<div class="input-group">
<div class="checkbox-group">
<input type="checkbox" id="mergeImages" checked>
<label for="mergeImages">چسباندن تصاویر</label>
</div>

<div id="dimensionsGroup">
<div class="input-group">
<label for="width">عرض (پیکسل)</label>
<input type="number" id="width" value="800" min="1">
</div>

<div class="input-group">
<label for="height">حداکثر طول (پیکسل)</label>
<input type="number" id="height" value="12000" min="1">
</div>
</div>

<div class="input-group">
<label for="format">فرمت خروجی</label>
<select id="format">
<option value="webp">WebP</option>
<option value="jpg">JPG</option>
<option value="png">PNG</option>
</select>
</div>

<div class="input-group">
<label for="quality">کیفیت تصویر (٪)</label>
<input type="range" id="quality" min="1" max="100" value="100">
<span id="qualityValue">100%</span>
</div>
</div>

<div class="progress-bar" id="progressBar">
<div class="progress-bar-fill" id="progressBarFill"></div>
</div>

<div class="button-group">
<button class="btn btn-primary" id="processBtn">شروع پردازش</button>
<button class="btn btn-secondary" id="downloadBtn" disabled>دانلود</button>
</div>
</div>

<script>
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const fileList = document.getElementById('fileList');
const mergeImages = document.getElementById('mergeImages');
const dimensionsGroup = document.getElementById('dimensionsGroup');
const processBtn = document.getElementById('processBtn');
const downloadBtn = document.getElementById('downloadBtn');
const progressBar = document.getElementById('progressBar');
const progressBarFill = document.getElementById('progressBarFill');
const qualitySlider = document.getElementById('quality');
const qualityValue = document.getElementById('qualityValue');

let files = [];

// Event Listeners
dropZone.addEventListener('click', () => fileInput.click());
dropZone.addEventListener('dragover', (e) => {
e.preventDefault();
dropZone.style.background = '#e9ecef';
});
dropZone.addEventListener('dragleave', () => {
dropZone.style.background = '#f8f9fa';
});
dropZone.addEventListener('drop', handleDrop);
fileInput.addEventListener('change', handleFileSelect);
mergeImages.addEventListener('change', toggleDimensionsGroup);
qualitySlider.addEventListener('input', updateQualityValue);
processBtn.addEventListener('click', processImages);

function handleDrop(e) {
e.preventDefault();
dropZone.style.background = '#f8f9fa';
const items = e.dataTransfer.items;
handleFiles(items);
}

function handleFileSelect(e) {
const items = e.target.files;
handleFiles(items);
}

function handleFiles(items) {
files = Array.from(items).filter(file => 
file.type.startsWith('image/') ||
file.webkitRelativePath.toLowerCase().endsWith('.jpg') ||
file.webkitRelativePath.toLowerCase().endsWith('.png') ||
file.webkitRelativePath.toLowerCase().endsWith('.webp')
);

updateFileList();
}

function updateFileList() {
fileList.innerHTML = '';
files.forEach(file => {
const fileItem = document.createElement('div');
fileItem.className = 'file-item';
fileItem.textContent = file.webkitRelativePath || file.name;
fileList.appendChild(fileItem);
});
}

function toggleDimensionsGroup() {
dimensionsGroup.style.display = mergeImages.checked ? 'block' : 'none';
}

function updateQualityValue() {
qualityValue.textContent = qualitySlider.value + '%';
}

function updateProgress(percent) {
progressBar.style.display = 'block';
progressBarFill.style.width = percent + '%';
}

async function processImages() {
if (files.length === 0) {
alert('لطفا ابتدا تصاویر را انتخاب کنید');
return;
}

processBtn.disabled = true;
updateProgress(0);

// Here would be the actual image processing logic
// For demonstration, we'll simulate processing with a delay
for (let i = 0; i < 100; i += 10) {
await new Promise(resolve => setTimeout(resolve, 200));
updateProgress(i);
}

updateProgress(100);
downloadBtn.disabled = false;
processBtn.disabled = false;
}

// Initialize
toggleDimensionsGroup();
updateQualityValue();
</script>
</body>
</html>
